/*
-----------------------------------------------------------------------------
This source file is part of OGRE
    (Object-oriented Graphics Rendering Engine)
For the latest info, see http://www.ogre3d.org/

Copyright (c) 2000-2014 Torus Knot Software Ltd

Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the "Software"), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:

The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.

THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.
-----------------------------------------------------------------------------
*/

#ifndef OGRE_TESTS_VISUALTESTS_PLAYPENTESTS_H
#define OGRE_TESTS_VISUALTESTS_PLAYPENTESTS_H

#include <cstddef>
#include <memory>

#include "OgreException.hpp"
#include "OgreFrustum.hpp"
#include "OgrePlatform.hpp"
#include "OgrePrerequisites.hpp"
#include "OgreRenderSystemCapabilities.hpp"
#include "OgreRoot.hpp"
#include "OgreShaderGenerator.hpp"
#include "OgreSphere.hpp"
#include "OgreStringVector.hpp"
#include "OgreVector.hpp"
#include "SdkSample.hpp"
#include "VisualTest.hpp"

namespace Ogre {
    class AnimationState;
    class Bone;
    class CompositorInstance;
    class ManualObject;
    class Mesh;
    class SceneManager;
    class SceneNode;
    struct FrameEvent;
}  // namespace Ogre
namespace OgreBites {
    class Button;
    class CheckBox;
}  // namespace OgreBites

using namespace Ogre;

//---------------------------------------------------------------------------
/** Test of Manual Blending */
class PlayPen_ManualBlend : public VisualTest
{
public:

    PlayPen_ManualBlend();

protected:

    void setupContent() override;

};

//---------------------------------------------------------------------------
/** Testing sphere projection */
class PlayPen_ProjectSphere : public VisualTest
{
public:

    PlayPen_ProjectSphere();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    ::std::unique_ptr<Sphere> mProjectionSphere;
    ManualObject* mScissorRect;
    void setupContent() override;

};

//---------------------------------------------------------------------------
/** Testing setting the camera's direction */
class PlayPen_CameraSetDirection : public VisualTest
{
public:

    PlayPen_CameraSetDirection();
    void buttonHit(OgreBites::Button* button) override;
    void checkBoxToggled(OgreBites::CheckBox* box) override;

protected:

    bool mUseParentNode{false};
    bool mUseFixedYaw{true};
    SceneNode* mParentNode;
    Vector3 mFocus;
    void setupContent() override;
    void toggleParentNode();
    void toggleFixedYaw();
    void track();

};

//---------------------------------------------------------------------------
/** Testing morph animation with normals */
class PlayPen_MorphAnimationWithNormals : public VisualTest
{
public:

    PlayPen_MorphAnimationWithNormals();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    AnimationState* mAnimations[2];

};

//---------------------------------------------------------------------------
/** Testing morph animation without normals */
class PlayPen_MorphAnimationWithoutNormals : public VisualTest
{
public:

    PlayPen_MorphAnimationWithoutNormals();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;
    
protected:

    void setupContent() override;
    AnimationState* mAnimations[2];

};

//---------------------------------------------------------------------------
/** Testing pose animation with normals */
class PlayPen_PoseAnimationWithNormals : public VisualTest
{
public:

    PlayPen_PoseAnimationWithNormals();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    AnimationState* mAnimations[2];

};

//---------------------------------------------------------------------------
/** Testing pose animation without normals */
class PlayPen_PoseAnimationWithoutNormals : public VisualTest
{
public:

    PlayPen_PoseAnimationWithoutNormals();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    AnimationState* mAnimations[2];

};
//
//---------------------------------------------------------------------------
/** Testing scene node tracking */
class PlayPen_SceneNodeTracking : public VisualTest
{
public:

    PlayPen_SceneNodeTracking();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    AnimationState* mAnimState;

};
//---------------------------------------------------------------------------

// forward declare, but don't define yet to keep this header clean
class StencilOpQueueListener;

/** Testing stencil glow effects */
class PlayPen_StencilGlow : public VisualTest
{
public:

    PlayPen_StencilGlow();
    ~PlayPen_StencilGlow() override;

protected:

    void setupContent() override;
    StencilOpQueueListener* mStencilListener{nullptr};

};
//------------------------------------------------------------------------------
/** Tests normal mapping with mirrored UVs */
class PlayPen_NormalMapMirroredUVs : public VisualTest
{
public:

    PlayPen_NormalMapMirroredUVs();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests mipmaps on a transparent material */
class PlayPen_TransparencyMipMaps : public VisualTest
{
public:

    PlayPen_TransparencyMipMaps();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests basic plane object rendering */
class PlayPen_BasicPlane : public VisualTest
{
public:

    PlayPen_BasicPlane();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests BSP plugin */
class PlayPen_Bsp : public VisualTest
{
public:

    PlayPen_Bsp();

    auto getRequiredPlugins() -> StringVector override
    {
        StringVector names;
        names.push_back("BSP Scene Manager");
        return names;
    }

    void createSceneManager() override
    {
        mSceneMgr = mRoot->createSceneManager("BspSceneManager");
        mShaderGenerator->addSceneManager(mSceneMgr);
    }

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests simple projection */
class PlayPen_Projection : public VisualTest
{
public:

    PlayPen_Projection();

protected:

    void setupContent() override;
    ::std::unique_ptr<Frustum> frustum;
};

//------------------------------------------------------------------------------
/** Tests multiple viewports */
class PlayPen_MultiViewports : public VisualTest
{
public:

    PlayPen_MultiViewports();

protected:

    void setupContent() override;
    ::std::unique_ptr<Frustum> frustum;
};

//------------------------------------------------------------------------------

class RefractionTextureListener;
class ReflectionTextureListener;

/** Tests reflection/refraction. */
class PlayPen_Distortion : public VisualTest
{
public:

    PlayPen_Distortion();
    ~PlayPen_Distortion() override;

protected:

    void setupContent() override;
    void cleanupContent() override;

    RefractionTextureListener* mRefractionListener;
    ReflectionTextureListener* mReflectionListener;

};

//------------------------------------------------------------------------------
/** Tests skeletal animation */
class PlayPen_SkeletalAnimation : public VisualTest
{
public:

    PlayPen_SkeletalAnimation();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests windowed viewports */
class PlayPen_WindowedViewportMode : public VisualTest
{
public:

    PlayPen_WindowedViewportMode();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests visibility settings for sub entities */
class PlayPen_SubEntityVisibility : public VisualTest
{
public:

    PlayPen_SubEntityVisibility();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests attaching objects to bones */
class PlayPen_AttachObjectsToBones : public VisualTest
{
public:

    PlayPen_AttachObjectsToBones();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests orthographic rendering */
class PlayPen_Ortho : public VisualTest
{
public:

    PlayPen_Ortho();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests clearing a running scene */
class PlayPen_ClearScene : public VisualTest
{
public:

    PlayPen_ClearScene();
    auto isScreenshotFrame(int frame) -> bool override;

protected:
    void setupContent() override;
};

//------------------------------------------------------------------------------
/** Tests stencil shadows */
class PlayPen_StencilShadows : public VisualTest
{
public:

    PlayPen_StencilShadows();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests stencil shadows with mixed operation submeshes */
class PlayPen_StencilShadowsMixedOpSubMeshes : public VisualTest
{
public:

    PlayPen_StencilShadowsMixedOpSubMeshes();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 2 spotlights casting light on a single mesh */
class PlayPen_2Spotlights : public VisualTest
{
public:

    PlayPen_2Spotlights();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests texture shadows */
class PlayPen_TextureShadows : public VisualTest
{
public:

    PlayPen_TextureShadows();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests custom texture shadow caster materials */
class PlayPen_TextureShadowsCustomCasterMat : public PlayPen_TextureShadows
{
public:

    PlayPen_TextureShadowsCustomCasterMat();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests a custom shadow receiver material for texture shadows */
class PlayPen_TextureShadowsCustomReceiverMat : public PlayPen_TextureShadows
{
public:

    PlayPen_TextureShadowsCustomReceiverMat();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests applying a compositor to texture shadow rendering */
class PlayPen_CompositorTextureShadows : public VisualTest
{
public:

    PlayPen_CompositorTextureShadows();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests switching compositor techniques rapidly */
class PlayPen_CompositorTechniqueSwitch : public VisualTest
{
public:

    PlayPen_CompositorTechniqueSwitch();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    void cleanupContent() override;

    CompositorInstance* mCompositorToSwitch;
    size_t mCompositorIndex;
    Real mTimeUntilNextToggle;
    StringVector mCompositorSchemeList;

};

//------------------------------------------------------------------------------
/** Tests creation and rendering of a whole lot of entities */
class PlayPen_LotsAndLotsOfEntities : public VisualTest
{
public:

    PlayPen_LotsAndLotsOfEntities();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests infinite bounding boxes */
class PlayPen_InfiniteAAB : public VisualTest
{
public:

    PlayPen_InfiniteAAB();

    auto getRequiredPlugins() -> StringVector override
    {
        StringVector names;
        names.push_back("BSP Scene Manager");
        return names;
    }

    void createSceneManager() override
    {
        mSceneMgr = mRoot->createSceneManager("BspSceneManager");
        mShaderGenerator->addSceneManager(mSceneMgr);
    }

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests static geometry */
class PlayPen_StaticGeometry : public VisualTest
{
public:

    PlayPen_StaticGeometry();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests reloading resources */
class PlayPen_ReloadResources : public VisualTest
{
public:

    PlayPen_ReloadResources();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    Real mReloadTimer;

};

//------------------------------------------------------------------------------
/** Tests billboard texture coordinates */
class PlayPen_BillboardTextureCoords : public VisualTest
{
public:

    PlayPen_BillboardTextureCoords();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests particles with an RTT reflection */
class PlayPen_ReflectedBillboards : public VisualTest
{
public:

    PlayPen_ReflectedBillboards();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests non-indexed manual object */
class PlayPen_ManualObjectNonIndexed : public VisualTest
{
public:

    PlayPen_ManualObjectNonIndexed();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests non-indexed manual objects updated with fewer verts/faces */
class PlayPen_ManualObjectNonIndexedUpdateSmaller : public PlayPen_ManualObjectNonIndexed
{
public:

    PlayPen_ManualObjectNonIndexedUpdateSmaller();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests non-indexed manual objects updated with more verts/faces */
class PlayPen_ManualObjectNonIndexedUpdateLarger : public PlayPen_ManualObjectNonIndexed
{
public:

    PlayPen_ManualObjectNonIndexedUpdateLarger();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests indexed manual objects */
class PlayPen_ManualObjectIndexed : public VisualTest
{
public:

    PlayPen_ManualObjectIndexed();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests indexed manual objects updating with less verts/faces */
class PlayPen_ManualObjectIndexedUpdateSmaller : public PlayPen_ManualObjectIndexed
{
public:

    PlayPen_ManualObjectIndexedUpdateSmaller();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests indexed manual objects updating with more verts/faces */
class PlayPen_ManualObjectIndexedUpdateLarger : public PlayPen_ManualObjectIndexed
{
public:

    PlayPen_ManualObjectIndexedUpdateLarger();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests billboard chain rendering */
class PlayPen_BillboardChain : public VisualTest
{
public:

    PlayPen_BillboardChain();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DDS cubemaps */
class PlayPen_CubeDDS : public VisualTest
{
public:

    PlayPen_CubeDDS();

protected:

    void setupContent() override;

};

class PlayPen_AlphaTex : public VisualTest
{
public:

    PlayPen_AlphaTex();

protected:

    void setupContent() override;

};

class PlayPen_TwoSidedLighting : public VisualTest
{
public:

    PlayPen_TwoSidedLighting();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT1 loading */
class PlayPen_Dxt1 : public VisualTest
{
public:

    PlayPen_Dxt1();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT1 loading from memory */
class PlayPen_Dxt1FromMemory : public VisualTest
{
public:

    PlayPen_Dxt1FromMemory();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT1 loading with alpha channel */
class PlayPen_Dxt1Alpha : public VisualTest
{
public:

    PlayPen_Dxt1Alpha();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT3 loading */
class PlayPen_Dxt3 : public VisualTest
{
public:

    PlayPen_Dxt3();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT3 loading from memory */
class PlayPen_Dxt3FromMemory : public VisualTest
{
public:

    PlayPen_Dxt3FromMemory();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests DXT5 loading */
class PlayPen_Dxt5 : public VisualTest
{
public:

    PlayPen_Dxt5();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests ribbon trail rendering */
class PlayPen_RibbonTrail : public VisualTest
{
public:

    PlayPen_RibbonTrail();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests diffuse blending */
class PlayPen_BlendDiffuseColour : public VisualTest
{
public:

    PlayPen_BlendDiffuseColour();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests custom projection matrices */
class PlayPen_CustomProjectionMatrix : public PlayPen_LotsAndLotsOfEntities
{
public:

    PlayPen_CustomProjectionMatrix();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests point sprites */
class PlayPen_PointSprites : public VisualTest
{
public:

    PlayPen_PointSprites();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests excluding shadows from a viewport */
class PlayPen_ViewportNoShadows : public VisualTest
{
public:

    PlayPen_ViewportNoShadows();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests serializing vertex colors in meshes */
class PlayPen_SerialisedColour : public VisualTest
{
public:

    PlayPen_SerialisedColour();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests billboard facing */
class PlayPen_BillboardAccurateFacing : public VisualTest
{
public:

    PlayPen_BillboardAccurateFacing();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests multiple scene managers */
class PlayPen_MultiSceneManagersSimple : public VisualTest
{
public:

    PlayPen_MultiSceneManagersSimple();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests manually moving bones */
class PlayPen_ManualBoneMovement : public VisualTest
{
public:

    PlayPen_ManualBoneMovement();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    Bone* mBone;

};

//------------------------------------------------------------------------------
/** Tests material schemes in viewports */
class PlayPen_MaterialSchemes : public VisualTest
{
public:

    PlayPen_MaterialSchemes();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests material scehemes with listener */
class PlayPen_MaterialSchemesListener : public VisualTest
{
public:

    PlayPen_MaterialSchemesListener();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests material schemes with LODs */
class PlayPen_MaterialSchemesWithLOD : public VisualTest
{
public:

    PlayPen_MaterialSchemesWithLOD();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests material schemes in viewports with different LODs */
class PlayPen_MaterialSchemesWithMismatchedLOD : public VisualTest
{
public:

    PlayPen_MaterialSchemesWithMismatchedLOD();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests hardware/software animation */
class PlayPen_SkeletonAnimationOptimise : public VisualTest
{
public:

    PlayPen_SkeletonAnimationOptimise();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests vertex textures (DX only) */
class PlayPen_VertexTexture : public VisualTest
{
public:

    PlayPen_VertexTexture();

    void testCapabilities(const RenderSystemCapabilities* caps) override
    {
        if(!caps->isShaderProfileSupported("hlsl") && !caps->isShaderProfileSupported("glsl"))
            OGRE_EXCEPT(Exception::ERR_NOT_IMPLEMENTED, "not implemented");
    }

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests setting billboard origin */
class PlayPen_BillboardOrigins : public VisualTest
{
public:

    PlayPen_BillboardOrigins();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests depth biasing */
class PlayPen_DepthBias : public VisualTest
{
public:

    PlayPen_DepthBias();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests transparent texture shadow casters */
class PlayPen_TextureShadowsTransparentCaster : public VisualTest
{
public:

    PlayPen_TextureShadowsTransparentCaster();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests integrated texture shadows */
class PlayPen_TextureShadowsIntegrated : public VisualTest
{
public:

    PlayPen_TextureShadowsIntegrated();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests light scissoring */
class PlayPen_LightScissoring : public VisualTest
{
public:

    PlayPen_LightScissoring();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests light clipping planes */
class PlayPen_LightClipPlanes : public VisualTest
{
public:

    PlayPen_LightClipPlanes();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests light clipping planes with lots of lights */
class PlayPen_LightClipPlanesMoreLights : public VisualTest
{
public:

    PlayPen_LightClipPlanesMoreLights();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests MRT */
class PlayPen_MRT : public VisualTest
{
public:

    PlayPen_MRT();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests applying many textures to a single material */
class PlayPen_16Textures : public VisualTest
{
public:

    PlayPen_16Textures();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests view projections for spotlight shadow cameras */
class PlayPen_SpotlightViewProj : public VisualTest
{
public:

    PlayPen_SpotlightViewProj();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests manual illumination stages */
class PlayPen_ManualIlluminationStage : public VisualTest
{
public:

    PlayPen_ManualIlluminationStage();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests altering a mesh mid-simulation */
class PlayPen_ReinitialiseEntityAlteredMesh : public VisualTest
{
public:

    PlayPen_ReinitialiseEntityAlteredMesh();
    auto frameStarted(const FrameEvent& evt) noexcept -> bool override;

protected:

    void setupContent() override;
    
    Mesh* mUpdate;
    Real mTimer;

};

//------------------------------------------------------------------------------
/** Tests sRGB textures */
class PlayPen_SRGBtexture : public VisualTest
{
public:

    PlayPen_SRGBtexture();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests negative scaling */
class PlayPen_NegativeScale : public VisualTest
{
public:

    PlayPen_NegativeScale();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 2d manual object */
class PlayPen_ManualObject2D : public VisualTest
{
public:

    PlayPen_ManualObject2D();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests shadow LODs */
class PlayPen_ShadowLod : public VisualTest
{
public:

    PlayPen_ShadowLod();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests rendering far from the origin */
class PlayPen_FarFromOrigin : public VisualTest
{
public:

    PlayPen_FarFromOrigin();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests geometry shaders */
class PlayPen_GeometryShaders : public VisualTest
{
public:

    PlayPen_GeometryShaders();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests alpha to coverage support */
class PlayPen_AlphaToCoverage : public VisualTest
{
public:

    PlayPen_AlphaToCoverage();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests light space shadow mapping (LiSPSM) shadow camera setup */
class PlayPen_LiSPSM : public VisualTest
{
public:

    PlayPen_LiSPSM();

protected:

    void setupContent() override;
    void cleanupContent() override;

};

//------------------------------------------------------------------------------
/** Tests blitting one texture onto another */
class PlayPen_BlitSubTextures : public VisualTest
{
public:

    PlayPen_BlitSubTextures();

protected:

    void setupContent() override;

};
//------------------------------------------------------------------------------
/** Tests blitting to texture with hardware scaling */
class PlayPen_HardwareScaleBlit : public VisualTest
{
public:

    PlayPen_HardwareScaleBlit();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests non-unique resource names in different resource groups */
class PlayPen_NonUniqueResourceNames : public VisualTest
{
public:

    PlayPen_NonUniqueResourceNames();

protected:

    void setupContent() override;
    void createMeshEntity(std::string_view group, Vector3 pos);

};
//------------------------------------------------------------------------------
/** Tests non-unique resource names in different resource groups */
class PlayPen_BuildTangentOnAnimatedMesh : public VisualTest
{
public:

    PlayPen_BuildTangentOnAnimatedMesh();

protected:

    void setupContent() override;

};
//------------------------------------------------------------------------------
/** Tests 64 bit float DDS */
class PlayPen_Float64DDS : public VisualTest
{
public:

    PlayPen_Float64DDS();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 128bit float DDS */
class PlayPen_Float128DDS : public VisualTest
{
public:

    PlayPen_Float128DDS();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 16bit float DDS */
class PlayPen_Float16DDS : public VisualTest
{
public:

    PlayPen_Float16DDS();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 32bit float DDS */
class PlayPen_Float32DDS : public VisualTest
{
public:

    PlayPen_Float32DDS();

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 4 bit per pixel PVR textures */
class PlayPen_4bppPVR : public VisualTest
{
public:

    PlayPen_4bppPVR();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 4 bit per pixel PVR textures w/ alpha */
class PlayPen_4bppAlphaPVR : public VisualTest
{
public:

    PlayPen_4bppAlphaPVR();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 2 bit per pixel PVR textures */
class PlayPen_2bppPVR : public VisualTest
{
public:

    PlayPen_2bppPVR();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

//------------------------------------------------------------------------------
/** Tests 2 bit per pixel PVR textures w/ alpha */
class PlayPen_2bppAlphaPVR : public VisualTest
{
public:

    PlayPen_2bppAlphaPVR();
    void testCapabilities(const Ogre::RenderSystemCapabilities* caps) override;

protected:

    void setupContent() override;

};

class PlayPen_BillboardText : public VisualTest
{
public:
    PlayPen_BillboardText();

protected:
    void setupContent() override;
};

class PlayPen_PBR : public OgreBites::SdkSample
{
public:
    PlayPen_PBR();

protected:
    void setupContent() override;
    void unloadResources() override;
};
//------------------------------------------------------------------------------

// some common tasks for these tests:
void addTextureDebugOverlay(std::string_view texname, size_t i);
void addTextureDebugOverlay(Ogre::TexturePtr tex, size_t i);
void addTextureShadowDebugOverlay(size_t num, Ogre::SceneManager* mgr);
void clearDebugTextureOverlays();

#endif
